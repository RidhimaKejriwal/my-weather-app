<ngx-spinner
  bdColor="rgba(0,0,0,0.5)"
  size="medium"
  color="white"
  type="ball-scale-multiple"
  [fullScreen]="true"
></ngx-spinner>
<div class="header text-center form-group">
    <div class="search">
        <input class="form-control" type="text" placeholder="Search for a location" [(ngModel)]="searchInput" (change)="search()"> 
        <i class="fa-solid fa-magnifying-glass search-icon"></i>
    </div>
    <i (click)="showAlert()" class="fa-regular fa-bell alert-icon cursor-pointer"></i>
    <i (click)="navigateToRainfallPredict()" class="fa-solid fa-cloud-showers-heavy alert-icon cursor-pointer"></i>
</div>
<div class="weather-container" *ngIf="weatherData">
    <div class="cards-container">
        <div class="first-row">
            <div class="card weather-card text-white">
                <h4><i class="fa-solid fa-location-dot me-2"></i>{{location}}</h4>
                <span>Now</span>
                <h2>{{convertFahrenheitToCelsius(weatherData?.currentConditions?.temp)}}&deg;C</h2>
                <span>{{weatherData?.currentConditions?.conditions}}</span>
            </div>
            <div class="card air-quality text-white">
                <h5>Wind Speed</h5>
                <h2>{{convertMphToKmh(weatherData?.currentConditions?.windspeed) | number:'1.1-1'}} km/h</h2>
                <span>{{getCardinalDirection(weatherData?.currentConditions?.winddir)}} Winds</span>
            </div>
            <div class="card rainfall text-white">
                <h5>Rainfall</h5>
                <span>Precipitation: {{days[0].precip}}mm</span>
                <span>Probability: {{days[0].precipprob}}%</span>
                <span *ngIf="days[0].preciptype">Type: {{days[0].preciptype[0]}}</span>
                <h6>{{days[0].conditions}}</h6>
            </div>
            <div class="card moonrise text-white">
                <h5>Sunrise / Sunset</h5>
                <span>Sunrise: {{weatherData.currentConditions?.sunrise}}</span>
                <span>Sunset: {{weatherData.currentConditions?.sunset}}</span>
                <span>Moon phase: {{weatherData.currentConditions?.moonphase}}</span>
            </div>
        </div>
        <div class="forecast-container">
            <div class="forecast">
                <h4 class="text-white">15 Day Forecast</h4>
                <div class="forecast-cards">
                    <div *ngFor="let day of days" class="card forecast-data cursor-pointer" (click)="changeHourlyData(day)">
                        <img [src]="getImage(day)" alt="">
                        <div class="data">
                            <span>{{formatDate(day.datetime)}}</span>
                            <p>{{day.conditions}}</p>
                        </div>
                        <span class="temp">{{convertFahrenheitToCelsius(day.tempmax)}}&deg;/{{convertFahrenheitToCelsius(day.tempmin)}}&deg;</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hours-data">
        <h4 class="text-white">Hourly Forecast</h4>
        <div class="hourly-data">
            <div *ngFor="let hour of selectedDay.hours" class="hour text-center">
                <span>{{convertFahrenheitToCelsius(hour.temp)}}&deg;</span>
                <img [src]="getImage(hour)" alt="">
                <span>{{hour.datetime | slice:0:5}}</span>
            </div>
        </div>
    </div>
    <div class="charts">
        <div class="mb-4 chart">
            <app-charts
              [chartType]="'line'"
              [chartData]="lineChartData"
              [chartOptions]="lineChartOptions">
            </app-charts>
        </div>
        <div class="mb-4 chart">
            <app-charts
              [chartType]="'bar'"
              [chartData]="barChartData"
              [chartOptions]="barChartOptions">
            </app-charts>
        </div>
        <div class="mb-2 chart">
            <app-charts
              [chartType]="'radar'"
              [chartData]="windChartData"
              [chartOptions]="windChartOptions">
            </app-charts>
        </div>
    </div>
</div>
